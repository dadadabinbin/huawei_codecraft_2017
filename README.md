# huawei_codecraft_2017
*huawei_codecraft_2017 wuhan university* 
## 程序整体理解：
### 初始化过程：
对边，网络节点，消费节点进行初始化，其中stackSizeControll控制BFS里面队列的宽度，也就是控制BFS搜索的宽度，<br/>当消费节点越多的时候，我们剪枝的越多
  用spfa找到候选参考服务器点，找到两两消费节点之间的直连路径，路径中的交汇点作为候选参考服务器节点，也就是一个网络节点
  同时出现在至少两条直连路径中，则作为候选参考服务器节点
### 在每个消费节点处放置一个蚂蚁，让其向内部走，每次所有蚂蚁同时走一步，检查其是否停止，同时还设置一个计数器，计数器
  数值不能超过1000，避免出现死循环
###蚂蚁往前走的过程无路可走会停止，花费超过直连服务器的部署成本会停止，当前面有多条路径可以选择时，根据费用将邻居节点排序，
从费用最小的路径开始选取，直到流量满足要求，同时蚂蚁也分裂成多个，分裂前的蚂蚁稍后删除，注意这里边的流量是动态变化的，
蚂蚁id也是自动增加的
### 蚂蚁集体每走一步，判断交汇点，这里判断交汇点是依据在每个网络节点上有一个属性，记录蚂蚁访问的次数，当真实蚂蚁（也就是不同
蚂蚁）访问次数大于等于2时，确定这个网络节点为交汇点，一开始初始化的时候我们给交汇节点数组分配的大小是等于消费节点的数目，
一旦大小不够用，则大小扩大为之前的三倍
### 当所有蚂蚁都停止了之后，要将所有路径的流量都还原成最初的状态，因为路径流量是动态变化的，这里要复原
### 初始化服务器解决方案：
   首先根据交汇点将非孤立节点的蚂蚁形成一套解决方案，在这个解决方案的基础上，我们认为如果一个服务器如果供应了
两个和两个以上消费节点，那么这就是一个好的服务器节点，如果一个服务器供应了一个消费节点，那么这就是一个坏的服务器节点，并
将经过坏的服务器的路径流量全部清空，此时的serverId存放的是供应两个及以上的消费节点的服务器节点。
   重置流量后，我们重新产生一个解决方案，这个解决方案保留了刚才方案中好的服务器节点，我们将有交汇点的消费节点方案同样放到
新的解决方案中，对于没有交汇节点的孤立节点，我们清空它的路径和流量，对其进行spfa搜索，找到这个消费节点到其他服务器的最优成本
路径。
   这里还有一个保护机制，如果spfa所得出的流量情况并不满足或者成本超过直连成本，则我们直接在这个孤立消费节点直连服务器
### 在这个新解决方案生成之后，我们对真实的服务器节点做一个标记		
用list<int> ForFindRealServerList;
int ForFindRealServer;bool ForFindRealServerBool;标记
然后我们开始踢服务器。我们根据服务器的性价比来踢服务器，每次剔除性价比最差的那个服务器，然后由这个服务器所导致的路径问题，
采用流量回退和spfa搜索来确定新的路径解决
1. 根据每个节点的kicklevel来确定好的参考服务器节点，但是这个kicklevel我不知道是怎么确定的
2. 新的解决方案生成之后，我们对比一下解决方案的服务器节点和初始化中选的好的参考节点，看那些服务器节点不是初始化中选的好的参考节点．
3. 根据解决方案输出到结果文件，并检验解决方案的有效性

